!function(e){e.TextOver=function(n,t){var o=(e.extend({},t),[]),i={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0,background:"none",color:"#ffffff","font-size":"24px",padding:"2px",height:"24px",width:"20px",overflow:"hidden",outline:"none","box-shadow":"none","-moz-box-shadow":"none","-webkit-box-shadow":"none",resize:"none"};getPos=function(n){var t=e(n).offset();return[t.left,t.top]},mouseAbs=function(e){return[e.pageX,e.pageY]},resizeTextArea=function(n){var t=e("#helper");t.length<1&&(t=e('<span id="helper"></span>')),innerHTML=String(e(this).val()).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")+"...",13==n.keyCode&&(innerHTML+="<br />..."),t.html(innerHTML).css({display:"none","word-wrap":"break-word","white-space":"normal","font-family":e(this).css("font-family"),"font-size":e(this).css("font-size"),"line-height":e(this).css("line-height"),"min-height":"24px"}),e("body").append(t),e(this).css({height:t.height()+6,width:t.width()+10})},newTextArea=function(n){removeEmpty();var t=e("<textarea></textarea>");t.css(i),position=mouseAbs(n),t.css({left:position[0],top:position[1]}),e(this).after(t),e(t).bind("keydown",resizeTextArea),e(t).on("paste",function(){e(this).trigger("keydown")}),e(t).focus(function(){e(this).css("border","1px dotted #cccccc")}).blur(function(){e(this).css("border","none")}),t.focus(),o.push(e(t))},removeTextArea=function(n){e(o[n]).remove(),o.splice(n,1)},removeEmpty=function(){e.each(o,function(n){""==e(this).val()&&removeTextArea(n)})},handleEsc=function(e){27==e.keyCode&&removeTextArea(o.length-1)},e(n).click(newTextArea),e(document).keydown(handleEsc)},e.fn.TextOver=function(n,t){return api=e.TextOver(this,n),e.isFunction(t)&&t.call(api),this}}(jQuery);